/*! rangeslider.js - v0.3.2 | (c) 2014 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):jQuery)}(function(r){function q(){var b=document.createElement("input");return b.setAttribute("type","range"),"text"!==b.type}function p(e,d){var f=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,f)},d)}function o(d,c){return c=c||100,function(){if(!d.debouncing){var a=Array.prototype.slice.apply(arguments);d.lastReturnVal=d.apply(window,a),d.debouncing=!0}return clearTimeout(d.debounceTimeout),d.debounceTimeout=setTimeout(function(){d.debouncing=!1},c),d.lastReturnVal}}function n(a,d){if(this.$window=r(window),this.$document=r(document),this.$element=r(a),this.options=r.extend({},j,d),this._defaults=j,this._name=m,this.startEvent=this.options.startEvent.join("."+m+" ")+"."+m,this.moveEvent=this.options.moveEvent.join("."+m+" ")+"."+m,this.endEvent=this.options.endEvent.join("."+m+" ")+"."+m,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&k){return !1}this.identifier="js-"+m+"-"+ +new Date,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.$fill=r('<div class="'+this.options.fillClass+'" />'),this.$handle=r('<div class="'+this.options.handleClass+'" />'),this.$range=r('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=r.proxy(this.handleDown,this),this.handleMove=r.proxy(this.handleMove,this),this.handleEnd=r.proxy(this.handleEnd,this),this.init();var c=this;this.$window.on("resize."+m,o(function(){p(function(){c.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+m,function(f,e){if(!e||e.origin!==m){var h=f.target.value,g=c.getPositionFromValue(h);c.setPosition(g)}})}var m="rangeslider",l=[],k=q(),j={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};n.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},n.prototype.update=function(){this.handleWidth=this.$handle[0].offsetWidth,this.rangeWidth=this.$range[0].offsetWidth,this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},n.prototype.handleDown=function(e){if(e.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var d=this.getRelativePosition(this.$range[0],e),f=this.getPositionFromNode(this.$handle[0])-this.getPositionFromNode(this.$range[0]);this.setPosition(d-this.grabX),d>=f&&d<f+this.handleWidth&&(this.grabX=d-f)}},n.prototype.handleMove=function(d){d.preventDefault();var c=this.getRelativePosition(this.$range[0],d);this.setPosition(c-this.grabX)},n.prototype.handleEnd=function(b){b.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},n.prototype.cap=function(e,d,f){return d>e?d:e>f?f:e},n.prototype.setPosition=function(e){var d,f;d=this.getValueFromPosition(this.cap(e,0,this.maxHandleX))/this.step*this.step,f=this.getPositionFromValue(d),this.$fill[0].style.width=f+this.grabX+"px",this.$handle[0].style.left=f+"px",this.setValue(d),this.position=f,this.value=d,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(f,d)},n.prototype.getPositionFromNode=function(d){for(var c=0;null!==d;){c+=d.offsetLeft,d=d.offsetParent}return c},n.prototype.getRelativePosition=function(d,c){return(c.pageX||c.originalEvent.clientX||c.originalEvent.touches[0].clientX||c.currentPoint.x)-this.getPositionFromNode(d)},n.prototype.getPositionFromValue=function(e){var d,f;return d=(e-this.min)/(this.max-this.min),f=d*this.maxHandleX},n.prototype.getValueFromPosition=function(e){var d,f;return d=e/(this.maxHandleX||1),f=this.step*Math.ceil((d*(this.max-this.min)+this.min)/this.step),Number(f.toFixed(2))},n.prototype.setValue=function(b){b!==this.value&&this.$element.val(b).trigger("change",{origin:m})},n.prototype.destroy=function(){this.$document.off(this.startEvent,"#"+this.identifier,this.handleDown),this.$element.off("."+m).removeAttr("style").removeData("plugin_"+m),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),l.splice(l.indexOf(this.$element[0]),1),l.length||this.$window.off("."+m)},r.fn[m]=function(a){return this.each(function(){var e=r(this),b=e.data("plugin_"+m);b||(e.data("plugin_"+m,b=new n(this,a)),l.push(this)),"string"==typeof a&&b[a]()})}});